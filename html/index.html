<!DOCTYPE html>
<html lang="zh_CN">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="./css/font-awesome.min.css">
    <link rel="stylesheet" href="./css/login_css.css">
    <title>登陆</title>
</head>
<body>
    <div class="main">
        <div class="card-content">
            <div class="register-content">
                <div class="title">登陆</div>
                <select class="select">
                    <option value ="1">管理员</option>
                    <option value ="2">部门1</option>
                    <option value ="3">部门2</option>
                </select>
                <input id="username" type="text" placeholder="用户名">
                <input id="password" type="password" placeholder="密码">
                <input id="submit"type="button" placeholder="密码" value="登陆" onclick="submit()">
            </div>
            <div class="login">没有账号？<a href="registe.html">注册</a></div>
        </div>
        <div id="toast" class="toast"></div>
    </div>
</body>
<script>
    var div = document.getElementById("toast");
    var username = document.getElementById("username");
    var password = document.getElementById("password");

    div.addEventListener("animationend",function(e){
        div.style.animation = "";
    });
    function toast(message){
        div.innerHTML = '<i style="font-size:17px;color:red;" class="fa fa-times" aria-hidden="true"></i>' + message;
        div.style.animation = "toast-animation 2s";
    }

    /*表单提交*/
    function submit(){
        var xmlhttp;
        if (window.XMLHttpRequest){
            xmlhttp=new XMLHttpRequest();
        }
        else{
            xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange=function(){
            if(xmlhttp.readyState == 4){
                if (xmlhttp.status==200){
                    if(xmlhttp.responseText != 1){
                        toast("账号密码错误");
                    }else{
                    window.location.href="./oa.html";
                    }
                }else{
                    toast("连接超时...");
                }
            }
        }
        xmlhttp.open("GET","./Servlet/login?username=" + username.value + "&password=" + password.value ,true); //提交地址
        xmlhttp.send();
    }
</script>
</html>